<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Click & Ship</title>

        <link rel="stylesheet" href="\css\global.css">
        <link rel="stylesheet" href="\css\AddEdit Item Design.css">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="icon" type="image/png" href="images\browser.png"/>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="\javascript\itemV.js" type="text/javascript"></script>
        <script src="\javascript\validator.min.js" type="text/javascript"></script>
    </head>
    <body id = "body" class = "d_flex">
        {{!-- <h1 hidden id="_id">{{_id}}</h1> --}}
        <div id = "header" class = "container-fluid">
            
            <br>
            <h1>
                {{#if itemName}}
                Edit Item
                {{else}}
                Add Item
                {{/if}}
            </h1>
        </div>

        <div class = "row container-fluid" id = "content">
            <form action = "/editItem/{{_id}}" method = "post" class="formBox row g-3 form" id = "form1" enctype="multipart/form-data">
                <div class = "col-md itemBox" id = "picturesBox">
                    <p id="_id" hidden> {{_id}} </p>
                        {{!-- <p id="shopName" > hello {{shopName}} </p> --}}
                        <input hidden type="text" id="shopName" value={{shopName}}>
                        <p id="sold" hidden> {{sold}} </p>
                        <p id="stocks" hidden> {{stocks}} </p>
                        <p id="upvote" hidden> {{upvote}} </p>
                        <p id="downvote" hidden> {{downvote}} </p>

                    <div class="flex flex-column">
                        <div class = "center container" id = "MainPicBox">
                            <img class = "img-fluid" name="itemPic"id="itemPic" src= "{{itemPic}}" alt="{{itemName}}">
                        </div>
                         <input name = "image" type="file" class="form-control" id="itemPics" value = "{{itemPic}}" onchange = "readURL(this)">  
                        <h5 id="label">Item Picture</h5> 


                    </div>
                        
                     
                </div>
               

                <div class = "col-md itemBox" id = "detailsBox">
                        <div class="col-md-10">
                        <label for="pname" class="form-label">Product Name</label>
                        <input type="text" class="form-control inputBox" id="pname" name = "itemName" value = "{{itemName}}">
                        </div>
                        <p id = "productNameError" class = "error"></p>

                        <div class="col-md-4">
                        <label for="price" class="form-label">Price</label>
                        <input type="number" class="form-control inputBox" id="price" name = "itemPrice" placeholder = "Php" value = "{{itemPrice}}">
                        </div>
                        <p id = "priceError" class = "error"></p>

                        <div class="col-md-4">
                            <label for="stock" class="form-label">Stock</label>
                            <input type="number" class="form-control inputBox" id="stock" name = "stock" placeholder = "# of items" value = "{{stocks}}">
                        </div>
                        <p id = "stockError" class = "error"></p>

                        <div class="col-md-4">
                            <label for="category" class="form-label">Category</label>
                            <select id="category" class="form-select inputBox" name = "category" value="{{category}}">
                            <option value = "NA" selected>Choose...</option>
                            <option value = "Accessories">Accessories</option>
                            <option value = "Beauty">Beauty</option>
                            <option value = "Clothing">Clothing</option>
                            <option value = "Home & Lifestyle">Home & Lifestyle</option>
                            <option value = "Technology">Technology</option>
                            </select>
                        </div>
                        <p id = "categoryError" class = "error"></p>

                        <div class="col-12">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name = "description" placeholder="Insert Description">{{description}}</textarea>
                        </div>
                        

                        <div class = "text-center">
                            <input type = "submit" id = "submit" class="center btn btn-primary" value = "SAVE">
                        </div>
            </form> 


            </div>
        </div>

        <script>
                function readURL(input) {
                        if (input.files && input.files[0]) {
                            var reader = new FileReader();

                            reader.onload = function (e) {
                               
                                $('#itemPic')
                                    .attr('src', e.target.result)
                            };

                         reader.readAsDataURL(input.files[0]);
                        }
                    }
                    window.onload = function (result) {
                        var id = document.getElementById("_id");
                        console.log(toString(id.innerText));

                    }
                </script>

                
        
    </body>
</html>